<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="home.css">
<title>Portfolio - Side by Side Videos</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #1d1d1d;
    color: white;
    margin: 20px;
  }

  h1 {
    text-align: center;
    margin-bottom: 30px;
  }

  .portfolio-container {
    display: flex;
    flex-wrap: wrap;
    gap: 30px;
    justify-content: flex-start; /* normal left align */
    max-width: 100vw;
    padding: 0 10px;
    box-sizing: border-box;
  }

  .portfolio-item {
    background: #222;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 0 15px rgba(0,0,0,0.7);
    cursor: pointer;

    width: calc(50% - 15px); /* half width minus half gap */
    display: flex;
    flex-direction: column;

    transform: translateY(100vh);
    opacity: 0;

    transition:
      transform 1s ease-out,
      opacity 1s ease-out,
      filter 0.3s ease;
  }

  /* Center last odd item exactly */
  .portfolio-container .portfolio-item:nth-last-child(1):nth-child(odd) {
    margin-left: calc(50% - (calc(50% - 15px)/2));
  }

  .portfolio-item.visible {
    transform: translateY(0);
    opacity: 1;
  }

  .portfolio-item:hover {
    transform: scale(1.05);
    filter: brightness(1.1);
  }

  .info {
    flex-grow: 1;
    padding: 20px;
    box-sizing: border-box;
  }

  .info h2 {
    font-size: 1.6em;
    margin: 0 0 12px 0;
    font-weight: 700;
    font-family: 'Playfair Display', serif;
  }

  .info a {
    color: #4ea1ff;
    word-break: break-word;
    font-weight: bold;
    text-decoration: none;
  }
  .info a:hover {
    text-decoration: underline;
  }

  .info p {
    font-size: 1em;
    line-height: 1.4;
    color: #ccc;
  }

  .preview {
    padding: 0 20px 20px 20px;
  }

  .preview iframe,
  .preview video,
  .preview img {
    width: 100%;
    max-height: 240px;
    border-radius: 10px;
    display: block;
    object-fit: contain;
    background: black;
  }

  @media (max-width: 700px) {
    .portfolio-item {
      width: 100% !important;
      margin-left: 0 !important;
    }
  }
</style>

<ul>
    <li><a style="margin-left: 5px;" class="active" href="./theoindex.html">Back</a></li>
    <li><a href="./announcements/index.html">Announcements</a></li>
    <li><a href="./upcoming/index.html">Upcoming</a></li>
    <li style="float: right;"><a href="https://github.com/mic9371/big-website" target="_blank"><img src="assets/github.png" style="height: 25px; color: white;" alt=""></a></li>
</ul>

</head>
<body>

<h1>My Portfolio</h1>

<div class="portfolio-container" id="portfolioContainer">
  <!-- portfolio items inserted here -->
</div>

<script>
  // Portfolio data
  const portfolioItems = [
  /*
  {
    title: "Title",
    link: "Link goes here (if invalid doesn't apply)",
    description: "Description goes here.",
    preview: null // or "./assets/example.png" - Custom preview if you have one in assets or elsewhere
  }
  */
];

  function isValidURL(str) {
    try {
      const url = new URL(str);
      return url.protocol === "http:" || url.protocol === "https:";
    } catch (_) {
      return false;
    }
  }

  function getYouTubeID(url) {
    try {
      const u = new URL(url);
      if (u.hostname === 'youtu.be') {
        return u.pathname.slice(1);
      } else if (u.hostname === 'www.youtube.com' || u.hostname === 'youtube.com') {
        return u.searchParams.get('v');
      }
      return null;
    } catch {
      return null;
    }
  }

  const container = document.getElementById('portfolioContainer');

  portfolioItems.forEach((item, index) => {
    const itemDiv = document.createElement('div');
    itemDiv.className = 'portfolio-item';

    // Info container
    const infoDiv = document.createElement('div');
    infoDiv.className = 'info';

    // Title
    const titleEl = document.createElement('h2');
    titleEl.textContent = item.title || "(No Title)";
    infoDiv.appendChild(titleEl);

    // Link
    if (isValidURL(item.link)) {
      const a = document.createElement('a');
      a.href = item.link;
      a.target = '_blank';
      a.rel = 'noopener noreferrer';
      a.textContent = item.link;
      infoDiv.appendChild(a);
    }
    // else no link shown if invalid

    // Description
    const desc = document.createElement('p');
    desc.textContent = item.description || "";
    infoDiv.appendChild(desc);

    // Preview container (at bottom)
    const previewDiv = document.createElement('div');
    previewDiv.className = 'preview';

    // Preview logic
    const ytID = isValidURL(item.link) ? getYouTubeID(item.link) : null;

    if (ytID) {
      const iframe = document.createElement('iframe');
      iframe.width = "560";
      iframe.height = "315";
      iframe.src = `https://www.youtube.com/embed/${ytID}`;
      iframe.title = "YouTube video player";
      iframe.frameBorder = "0";
      iframe.allow = "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture";
      iframe.allowFullscreen = true;
      previewDiv.appendChild(iframe);
    } else if (item.preview) {
      const ext = item.preview.split('.').pop().toLowerCase();
      if (['mp4', 'webm', 'ogg'].includes(ext)) {
        const video = document.createElement('video');
        video.src = item.preview;
        video.controls = true;
        previewDiv.appendChild(video);
      } else if (['jpg', 'jpeg', 'png', 'gif', 'webp'].includes(ext)) {
        const img = document.createElement('img');
        img.src = item.preview;
        img.alt = item.title + ' preview image';
        previewDiv.appendChild(img);
      }
    } else {
      // no preview available
      const noPreview = document.createElement('p');
      noPreview.textContent = "(No preview available)";
      previewDiv.appendChild(noPreview);
    }

    itemDiv.appendChild(infoDiv);
    itemDiv.appendChild(previewDiv);

    container.appendChild(itemDiv);

    // Animate tween delay for stagger effect
    setTimeout(() => {
      itemDiv.classList.add('visible');
    }, 150 * index);
  });
</script>

</body>
</html>